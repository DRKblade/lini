lemonbar: '%{O40}${greeting}%{r}${cpu} ${memory} ${battery} ${frame} %{B- O40}'
#lemonbar: '%{O40}${greeting}%{c}${wm}%{r}${cpu} ${memory} ${battery} ${frame} %{B- O40}'
  sep: '%{B- O10}'
  dynamic_base:H ${dep sep}${format} ${text}
    percentage:$ cache ${dep cache_time ? 1000} ${dep calculation}
    smooth_level:$i cache 5 ${smooth 0.3 ${dep level}}
    background:$ color cielch(${map 30 0.9:0.4 ${dep smooth_level}}, ${map 30 0.2:0.6 ${dep smooth_level}}, ${map 30 90:30 ${dep smooth_level}})
    foreground:$ color cielch(${map 30 0.3:2 ${dep smooth_level}}, 0.4, ${map 30 60:30 ${dep smooth_level}})
    format:$ arrcache 31 ${dep smooth_level} '%{B${dep background} F${dep foreground}}'

  greeting:$ refcache ${datetime.mode} 10000 ${raw}
    raw: %{F#522 U#522}Hi %{T2}${env USER}%{T-}, ${dep datetime}
    datetime:$ save mode ${cmd ./scripts/date.sh ${mode} ? N/A}
      mode:$ var time

  wm:$ cache 200 ${raw}
    raw:$ cmd ./scripts/bspwm.sh ? N/A

  cpu:$ clone dynamic_base
    text: CPU %{T2}${dep percentage}%{T-}
    level:$ map 89:90 0:30 ${dep percentage}

  memory:$ clone dynamic_base
    text: RAM %{T2}${dep percentage}%{T-}
    cache_time: 2000
    level:$ map 89:90 0:30 ${dep percentage}

  battery:$ clone dynamic_base
    text: BAT %{T2}${dep percentage}%{T-}
    cache_time: 1000
    level:$ map 21:20 0:30 ${dep percentage}

  frame:$ clone dynamic_base
    text: %{T2}${dep calculation}%{T-}ms
    calculation:$ var float -1
    level:$ map 2.5:2.6 0:30 ${dep percentage}

lemonbar.cpu.calculation:$ save last_status ${cmd ./scripts/cpu.sh ${last_status} ? N/A}
  last_status:$ var '0 0'
lemonbar.memory.calculation:$ cmd ./scripts/memory.sh ? N/A
lemonbar.battery.calculation:$ cmd ./scripts/battery.sh ${bat_name} ? N/A
  bat_name: BAT1
