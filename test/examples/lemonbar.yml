lemonbar: "%{O40}${options} %{c} ${wm} %{r} ${status} ${frame} %{B- O40}"
  sep: "%{B- O10}"

  warn_module:H ${dep sep}${format} ${text}
    smooth_level:$i cache 5 ${smooth 0.3 ${map 1 30 ${dep level}}}
    #smooth_level: 30
    background:$ gradient "0:${norm} 30:${warn}" ${dep smooth_level}
      norm:$ var #EDB
      warn:$ var #B32
    foreground:$ gradient "0:${norm} 30:${warn}" ${dep smooth_level}
      norm:$ var #522
      warn:$ var #FFF
    format:$ arrcache 31 ${dep smooth_level} "%{B${dep background} F${dep foreground}}"

  simple_module:H$ clone warn_module
    percentage:L$ cache ${dep cache_time} ${dep calculation}
    cache_time:$ var 1000

  options:$ refcache "${raw.mode}${greeting.datetime.mode}" 20000 "${dep sep}%{F#522}${raw}${dep sep}"
    raw:$ save ${mode} ${cmd "./scripts/options.sh ${} ${mode} ${dep greeting}" ? N/A}
      mode:$ var closed
    greeting:$ refcache ${datetime.mode} 10000 ${raw}
      raw: %{B- F#522 U#522}Hi %{T2}${env USER}%{T-}, ${dep datetime}
      datetime:$ save ${mode} ${cmd "./scripts/date.sh ${} ${mode} ${dep stonks}" ? N/A}
        mode:$ var stonks
      stonks:$ save ${cache} ${poll "./scripts/stonks.sh GME" ? ${cache}}
        cache:$ var ""


  wm:$ cache 200 ${raw}
    raw:$ save ${cache} ${poll ./scripts/bspwm.sh ? ${cache}}
      cache:$ var ""

  status:$ clone warn_module
    text:$ save ${dep state} ${save ${cache} ${poll}} ;
      poll:$ poll "./scripts/performance.sh ${} ${reload_time} ${bat_type} ${thermal_zone}"  ? ${dep cache}
        reload_time: 1
        bat_type: BAT1
        thermal_zone: 0
      cache:$ var ""
    state:$ var 0
    level: ${dep state}

  memory:$ clone simple_module
    text: RAM %{T2}${dep percentage}%{T-}
    cache_time:= 2000
    level:$ map 89:90 1 ${dep percentage}

  temp:$ clone simple_module
    text: %{T2}${dep percentage}%{T-}Â°C
    level:$ map 69:70 1 ${dep percentage}

  battery:$ clone simple_module
    text: BAT %{T2}${dep percentage}%{T-}
    cache_time:= 20000
    level:$ map 21:20 1 ${dep percentage}

  frame:$ clone simple_module
    background.norm:= #CDB
    background.warn:= #B32
    text: %{T2}${dep calculation}%{T-}ms
    calculation:$ var float -1
    level:$ map 2.5:2.6 1 ${dep percentage}

lemonbar.cpu.calculation:$ save ${last_status} ${cmd "./scripts/cpu.sh ${last_status}" ? N/A}
  last_status:$ var "0 0"
lemonbar.memory.calculation:$ cmd "./scripts/memory.sh" ? N/A
lemonbar.temp.calculation:$ cmd "./scripts/temp.sh ${zone}" ? N/A
  zone: 0
lemonbar.battery.calculation:$ cmd "./scripts/battery.sh ${bat_name}" ? N/A
  bat_name: BAT1
